webpackJsonp([12],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view",{attrs:{name:"header"}}),this._v(" "),e("router-view"),this._v(" "),e("router-view",{attrs:{name:"footer"}})],1)},staticRenderFns:[]};var u,c,a,s=n("VU/8")({name:"App"},r,!1,function(t){n("x7Gf")},null,null).exports,i=n("mtWM"),p=n.n(i).a.create({baseURL:"http://119.23.212.109/api"}),h=n("Rf8U"),d=n.n(h),f=n("/ocq"),l=n("Dd8w"),m=n.n(l),_=n("NYxO"),O=n("424j"),T=n("bOdI"),C=n.n(T),A=n("mvHQ"),L=n.n(A),D={state:{shops:[],chooseType:{},chooseTypeIndex:0,chooseShop:{},chooseProduct:{},productCache:{},isEjectChooseType:!1},getters:{products:function(t){return t.chooseType.products}},mutations:(u={},C()(u,"LOAD_SHOP_LIST",function(t,e){t.shops=e.list}),C()(u,"LOAD_SHOP_TYPE",function(t,e){t.chooseShop=t.shops[e]}),C()(u,"LOAD_PRODUCT_TYPE",function(t,e){t.chooseType=t.chooseShop.types[e],t.chooseTypeIndex=e}),C()(u,"LOAD_PRODUCT_DETAIL",function(t,e){t.chooseProduct=this.getters.products[e],this.commit("PRODUCT_CACHE")}),C()(u,"SHOW_CHOOSE_TYPE",function(t,e){t.isEjectChooseType=e}),C()(u,"PRODUCT_CACHE",function(t){t.productCache=JSON.parse(L()(t.chooseProduct)),o.a.set(t.productCache,"count",1)}),C()(u,"CHANGE_PRODUCT_COUNT",function(t,e){o.a.set(t.productCache,"count",e)}),C()(u,"CART_PRODUCT_ALLPRICE",function(t,e){o.a.set(t.productCache,"allPrice",Math.ceil(100*e)/100)}),C()(u,"CHANGE_PRODUCT_CACHE",function(t,e){var n=e.key,r=e.value;o.a.set(t.productCache,n,r)}),u),actions:C()({},"LOAD_SHOP_LIST",function(t){var e=t.commit;if(0===t.state.shops.length)return o.a.axios({url:"/shopList",method:"get"}).then(function(t){return e("LOAD_SHOP_LIST",t.data)}).catch(function(t){return console.error(t)})})},E={state:{cartShops:[]},mutations:(c={},C()(c,"ADD_TO_CART",function(t,e){var n=t.cartShops;return!n||n.every(function(t){return t.shopID!==e.shopID})?n.push(e):n=n.map(function(t){return t.products.every(function(t){return t.productID!==e.products[0].productID||t.type!==e.products[0].type})?t.products.push(e.products[0]):t.products.forEach(function(n,o){n.productID===e.products[0].productID&&n.type===e.products[0].type&&(t.products[o].count+=e.products[0].count)}),t}),n}),C()(c,"CHANGE_CART_PRODUCT_DATA",function(t,e){var n=e.shopIndex,r=e.productIndex,u=e.prop,c=e.val;o.a.set(t.cartShops[n].products[r],u,c)}),C()(c,"SHOP_ALL_CHECK",function(t,e){var n=e.shopIndex,r=e.val;o.a.set(this.state.cartShops[n],"checked",r)}),C()(c,"DEL_CART_SHOP",function(t,e){t.cartShops.splice(e,1)}),C()(c,"DEL_CART_PRODUCT",function(t,e){var n=e.shopIndex,o=e.productIndex;t.cartShops[n].products.splice(o,1)}),C()(c,"CLEAR_CART",function(t){t.cartShops=[]}),c)},v={state:{hasLogin:!1,name:"",un:""},mutations:(a={},C()(a,"CHANGE_LOGIN_TOKEN",function(t){t.hasLogin=!0}),C()(a,"LOAD_USERNAME",function(t,e){var n=e.name,o=e.un;t.name=n,t.un=o}),C()(a,"LOGOUT",function(t){t.name="未登陆",t.hasLogin=!1}),a)};o.a.use(_.a);var S=new _.a.Store({strict:!1,state:m()({},D.state,E.state,v.state),getters:m()({},D.getters),mutations:m()({},D.mutations,E.mutations,v.mutations),actions:m()({},D.actions),plugins:[Object(O.a)()]}),P=function(){return n.e(8).then(n.bind(null,"UzLt"))},I=function(){return n.e(7).then(n.bind(null,"NH3f"))};o.a.use(f.a);var H=new f.a({base:"/",routes:[{path:"/",name:"电商",alias:"/index",components:{default:function(){return n.e(1).then(n.bind(null,"8hXn"))},header:P,footer:I}},{path:"/shop/:shopIndex",name:"商店",props:{default:!0,header:!1,footer:!1},components:{default:function(){return n.e(2).then(n.bind(null,"9sln"))},header:P,footer:I},beforeEnter:function(t,e,n){S.commit("LOAD_SHOP_TYPE",t.params.shopIndex),n()}},{path:"/user",name:"用户管理",components:{default:function(){return n.e(10).then(n.bind(null,"nXOw"))},header:P,footer:I}},{path:"/order",name:"订单管理",components:{default:function(){return n.e(6).then(n.bind(null,"vF69"))},header:P,footer:I}},{name:"商品",path:"/shop/:shopIndex/product/:productIndex",components:{default:function(){return n.e(4).then(n.bind(null,"pGxt"))},header:P},beforeEnter:function(t,e,n){S.commit("LOAD_SHOP_TYPE",t.params.shopIndex),S.commit("LOAD_PRODUCT_DETAIL",t.params.productIndex),n()}},{path:"/cart",name:"购物车",components:{default:function(){return n.e(3).then(n.bind(null,"5bqY"))},header:P}},{path:"/login",name:"登陆",components:{default:function(){return n.e(5).then(n.bind(null,"Quw4"))},header:P}},{path:"/register",name:"注册",components:{default:function(){return n.e(9).then(n.bind(null,"c2lw"))},header:P}},{path:"/pay",name:"付款",components:{default:function(){return n.e(0).then(n.bind(null,"1xec"))},header:P}}]});H.beforeEach(function(t,e,n){"/login"===t.path?n():S.state.hasLogin||"/user"!=t.path?n():(console.log(e.path),n("/login"))});var b=H;o.a.config.productionTip=!1,o.a.use(d.a,p),new o.a({el:"#app",components:{App:s},router:b,store:S,template:"<App/>",methods:{setHTMLFontSize:function(){var t=document.documentElement.clientWidth||document.body.clientWidth;return document.documentElement.style.fontSize=t/3.75+"px",t}},created:function(){var t=this;t.setHTMLFontSize(),window.addEventListener("resize",function(){t.setHTMLFontSize()})}})},x7Gf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0cd571cdc7c388c51704.js.map