webpackJsonp([4],{"5bqY":function(t,c,o){"use strict";Object.defineProperty(c,"__esModule",{value:!0});o("7+uW");var s={props:["productIndex","shopIndex"],computed:{product:{get:function(){return this.$store.state.cartShops[this.shopIndex].products[this.productIndex]},set:function(t){var c=t.prop,o=t.val;this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:this.shopIndex,productIndex:this.productIndex,prop:c,val:o})}},count:{get:function(){return this.product.count},set:function(t){t&&(this.product={prop:"count",val:parseInt(t)},this.computeAllPrice())}}},methods:{countSub:function(){this.count=this.product.count>1?this.product.count-1:1},countplus:function(){this.count=this.product.count+1},computeAllPrice:function(){var t=Math.ceil(this.product.price*this.product.count*100)/100;this.product={prop:"allPrice",val:t}}}},e={render:function(){var t=this,c=t.$createElement,o=t._self._c||c;return o("div",{staticClass:"change-price"},[o("span",{staticClass:"count"},[o("button",{staticClass:"icon-subtract",on:{click:function(c){t.countSub()}}},[t._v("-")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"input-count",attrs:{type:"number"},domProps:{value:t.count},on:{input:function(c){c.target.composing||(t.count=c.target.value)}}}),t._v(" "),o("button",{staticClass:"icon-add",on:{click:function(c){t.countplus()}}},[t._v("+")])])])},staticRenderFns:[]};var n={name:"cart",computed:{cartShops:function(){return this.$store.state.cartShops},allPrice:function(){if(this.cartShops.length>0){var t=this.cartShops.map(function(t,c){return t.products.map(function(t,c){return t.checked?parseFloat(t.allPrice):0}).reduce(function(t,c){return t+c},0)}).reduce(function(t,c){return t+c},0);return Math.ceil(100*t)/100}return 0},canGoPay:function(){return 0==this.$store.state.cartShops.length?"":"/pay"}},watch:{cartShops:{handler:function(t){var c=this;t.forEach(function(t,o){console.log(t.products.length),0===t.products.length?c.$store.commit("DEL_CART_SHOP",o):t.products.every(function(t){return t.checked})?c.$store.commit("SHOP_ALL_CHECK",{shopIndex:o,val:!0}):c.$store.commit("SHOP_ALL_CHECK",{shopIndex:o,val:!1})})},deep:!0}},methods:{shopAllSelect:function(t,c){var o=this;this.$store.commit("SHOP_ALL_CHECK",{shopIndex:c,val:t.target.checked}),t.target.checked?this.cartShops[c].products.forEach(function(t,s){o.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:s,prop:"checked",val:!0})}):this.cartShops[c].products.forEach(function(t,s){o.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:s,prop:"checked",val:!1})})},checkedSync:function(t,c,o){t.target.checked?this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:o,prop:"checked",val:!0}):this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:o,prop:"checked",val:!1})},delCartProduct:function(t,c){this.$store.commit("DEL_CART_PRODUCT",{shopIndex:t,productIndex:c})}},created:function(){},components:{CartCount:o("VU/8")(s,e,!1,function(t){o("hNry")},"data-v-b522f2f0",null).exports}},a={render:function(){var t=this,c=t.$createElement,o=t._self._c||c;return o("div",[o("div",{staticClass:"cart-list"},t._l(t.cartShops,function(c,s){return o("div",{staticClass:"list-shop"},[o("div",{staticClass:"shop-module"},[o("div",{staticClass:"checkbox"},[o("input",{staticClass:"input-choose",attrs:{id:c.shopID,type:"checkbox"},domProps:{checked:c.checked},on:{click:function(c){t.shopAllSelect(c,s)}}}),t._v(" "),o("label",{staticClass:"choose-label",attrs:{for:c.shopID}})]),t._v(" "),o("router-link",{staticClass:"shop-name",attrs:{to:"/shop/"+s+"?headName="+c.name}},[t._v(t._s(c.name))]),t._v(" "),o("span",{staticClass:"icon--go"},[t._v(">")])],1),t._v(" "),o("ul",t._l(c.products,function(e,n){return o("li",{key:e.productID,staticClass:"list-product"},[o("div",{staticClass:"checkbox"},[o("input",{staticClass:"input-choose",attrs:{id:e.productID+e.type,"data-shop-id":c.shopID,"data-price":e.price,"data-count":e.count,type:"checkbox"},domProps:{checked:e.checked},on:{click:function(c){t.checkedSync(c,s,n)}}}),t._v(" "),o("label",{staticClass:"choose-label",attrs:{for:e.productID+e.type}})]),t._v(" "),o("div",{staticClass:"pic-wrap"},[o("img",{staticClass:"preview-pic",attrs:{src:e.picSrc}})]),t._v(" "),o("div",{staticClass:"product-module"},[o("p",{staticClass:"product-name btn--a"},[t._v(t._s(e.name))]),t._v(" "),o("div",{staticClass:"choose-type btn--a"},[o("span",[t._v(t._s(e.type))]),o("span",{staticClass:"icon--go"},[t._v(">")])]),t._v(" "),o("CartCount",{attrs:{"shop-index":s,"product-index":n}}),t._v(" "),o("button",{staticClass:"btn-del",on:{click:function(c){t.delCartProduct(s,n)}}},[t._v("删除")])],1)])}))])})),t._v(" "),t.canGoPay?o("div",{staticClass:"payment-module"},[o("div",{staticClass:"all-price"},[t._v("总计："+t._s(t.allPrice))]),t._v(" "),o("router-link",{staticClass:"payment btn--a",attrs:{to:t.canGoPay}},[t._v("结算")])],1):o("div",{staticClass:"no-product-tip"},[o("p",{staticClass:"tip-text"},[t._v("你的购物车空空如也")])])])},staticRenderFns:[]};var r=o("VU/8")(n,a,!1,function(t){o("jE2a")},"data-v-4f167da3",null);c.default=r.exports},hNry:function(t,c){},jE2a:function(t,c){}});
//# sourceMappingURL=4.cb1a66a2d5c2ced916ad.js.map