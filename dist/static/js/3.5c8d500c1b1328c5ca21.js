webpackJsonp([3],{"5bqY":function(t,c,s){"use strict";Object.defineProperty(c,"__esModule",{value:!0});s("7+uW");var e={props:["productIndex","shopIndex"],computed:{product:{get:function(){return this.$store.state.cartShops[this.shopIndex].products[this.productIndex]},set:function(t){var c=t.prop,s=t.val;this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:this.shopIndex,productIndex:this.productIndex,prop:c,val:s})}},count:{get:function(){return this.product.count},set:function(t){t&&(this.product={prop:"count",val:parseInt(t)},this.computeAllPrice())}}},methods:{countSub:function(){this.count=this.product.count>1?this.product.count-1:1},countplus:function(){this.count=this.product.count+1},computeAllPrice:function(){var t=Math.ceil(this.product.price*this.product.count*100)/100;this.product={prop:"allPrice",val:t}}}},o={render:function(){var t=this,c=t.$createElement,s=t._self._c||c;return s("div",{staticClass:"change-price"},[s("span",{staticClass:"count"},[s("button",{staticClass:"icon-subtract",on:{click:function(c){t.countSub()}}},[t._v("-")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"input-count",attrs:{type:"number"},domProps:{value:t.count},on:{input:function(c){c.target.composing||(t.count=c.target.value)}}}),t._v(" "),s("button",{staticClass:"icon-add",on:{click:function(c){t.countplus()}}},[t._v("+")])])])},staticRenderFns:[]};var n={name:"cart",data:function(){return{isShopAllCheck:!1}},computed:{cartShops:function(){return this.$store.state.cartShops},allPrice:function(){if(this.cartShops.length>0){var t=this.cartShops.map(function(t,c){return t.products.map(function(t,c){return t.checked?parseFloat(t.allPrice):0}).reduce(function(t,c){return t+c},0)}).reduce(function(t,c){return t+c},0);return Math.ceil(100*t)/100}return 0},canGoPay:function(){return 0==this.$store.state.cartShops.length?"":"/pay"}},watch:{cartShops:{handler:function(t){var c=this;t.forEach(function(t,s){t.products.every(function(t){return t.checked})?c.$store.commit("SHOP_ALL_CHECK",{shopIndex:s,val:!0}):c.$store.commit("SHOP_ALL_CHECK",{shopIndex:s,val:!1})})},deep:!0}},methods:{shopAllSelect:function(t,c,s){var e=this;document.querySelectorAll(".js-checked").forEach(function(o,n){o.dataset.shopId==s&&(t.target.checked?e.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:n,prop:"checked",val:!0}):e.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:n,prop:"checked",val:!1}))})},checkedSync:function(t,c,s){t.target.checked?this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:s,prop:"checked",val:!0}):this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:c,productIndex:s,prop:"checked",val:!1})}},components:{CartCount:s("VU/8")(e,o,!1,function(t){s("f83d")},"data-v-3de1476a",null).exports}},a={render:function(){var t=this,c=t.$createElement,s=t._self._c||c;return s("div",[s("div",{staticClass:"cart-list"},t._l(t.cartShops,function(c,e){return s("div",{staticClass:"list-shop"},[s("div",{staticClass:"shop-module"},[s("div",{staticClass:"checkbox"},[s("input",{staticClass:"input-choose js-calcprice",attrs:{type:"checkbox",id:c.shopID},domProps:{checked:c.checked},on:{click:function(s){t.shopAllSelect(s,e,c.shopID)}}}),t._v(" "),s("label",{staticClass:"choose-label",attrs:{for:c.shopID}})]),t._v(" "),s("router-link",{staticClass:"shop-name",attrs:{to:"/shop?headName="+c.name}},[t._v(t._s(c.name))]),t._v(" "),s("span",{staticClass:"icon--go"},[t._v(">")])],1),t._v(" "),s("ul",t._l(c.products,function(o,n){return s("li",{staticClass:"list-product"},[s("div",{staticClass:"checkbox"},[s("input",{staticClass:"input-choose js-checked js-calcprice",attrs:{id:o.productID+o.type,"data-shop-id":c.shopID,"data-price":o.price,"data-count":o.count,type:"checkbox"},domProps:{checked:o.checked},on:{click:function(c){t.checkedSync(c,e,n)}}}),t._v(" "),s("label",{staticClass:"choose-label",attrs:{for:o.productID+o.type}})]),t._v(" "),s("div",{staticClass:"pic-wrap"},[s("img",{staticClass:"preview-pic",attrs:{src:o.picSrc}})]),t._v(" "),s("div",{staticClass:"product-module"},[s("p",{staticClass:"product-name btn--a"},[t._v(t._s(o.name))]),t._v(" "),s("div",{staticClass:"choose-type btn--a"},[s("span",[t._v(t._s(o.type))]),s("span",{staticClass:"icon--go"},[t._v(">")])]),t._v(" "),s("CartCount",{attrs:{"shop-index":e,"product-index":n}})],1)])}))])})),t._v(" "),t.canGoPay?s("div",{staticClass:"payment-module"},[s("div",{staticClass:"price all-price"},[t._v("总计："+t._s(t.allPrice))]),t._v(" "),s("router-link",{staticClass:"payment btn--a",attrs:{to:t.canGoPay}},[t._v("结算")])],1):s("div",{staticClass:"no-product-tip"},[s("p",{staticClass:"tip-text"},[t._v("你的购物车空空如也")])])])},staticRenderFns:[]};var i=s("VU/8")(n,a,!1,function(t){s("CB3S")},"data-v-aa93c2ac",null);c.default=i.exports},CB3S:function(t,c){},f83d:function(t,c){}});
//# sourceMappingURL=3.5c8d500c1b1328c5ca21.js.map