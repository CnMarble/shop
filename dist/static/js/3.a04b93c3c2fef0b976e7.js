webpackJsonp([3],{"5bqY":function(t,s,c){"use strict";Object.defineProperty(s,"__esModule",{value:!0});c("7+uW");var o={props:["productIndex","shopIndex"],computed:{product:{get:function(){return this.$store.state.cartShops[this.shopIndex].products[this.productIndex]},set:function(t){var s=t.prop,c=t.val;this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:this.shopIndex,productIndex:this.productIndex,prop:s,val:c})}},count:{get:function(){return this.product.count},set:function(t){t&&(this.product={prop:"count",val:parseInt(t)},this.computeAllPrice())}}},methods:{countSub:function(){this.count=this.product.count>1?this.product.count-1:1},countplus:function(){this.count=this.product.count+1},computeAllPrice:function(){var t=Math.ceil(this.product.price*this.product.count*100)/100;this.product={prop:"allPrice",val:t}}}},e={render:function(){var t=this,s=t.$createElement,c=t._self._c||s;return c("div",{staticClass:"change-price"},[c("span",{staticClass:"count"},[c("button",{staticClass:"icon-subtract",on:{click:function(s){t.countSub()}}},[t._v("-")]),t._v(" "),c("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"input-count",attrs:{type:"number"},domProps:{value:t.count},on:{input:function(s){s.target.composing||(t.count=s.target.value)}}}),t._v(" "),c("button",{staticClass:"icon-add",on:{click:function(s){t.countplus()}}},[t._v("+")])])])},staticRenderFns:[]};var i={name:"cart",computed:{cartShops:function(){return this.$store.state.cartShops},allPrice:function(){if(this.cartShops.length>0){var t=this.cartShops.map(function(t,s){return t.products.map(function(t,s){return t.checked?parseFloat(t.allPrice):0}).reduce(function(t,s){return t+s},0)}).reduce(function(t,s){return t+s},0);return Math.ceil(100*t)/100}return 0},hasProducts:function(){return 0==this.cartShops.length?"":"/pay"}},methods:{shopAllSelect:function(t,s){var c=this;this.$store.commit("SHOP_ALL_CHECK",{shopIndex:s,val:t.target.checked}),t.target.checked?this.cartShops[s].products.forEach(function(t,o){c.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:s,productIndex:o,prop:"checked",val:!0})}):this.cartShops[s].products.forEach(function(t,o){c.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:s,productIndex:o,prop:"checked",val:!1})})},checkedSync:function(t,s,c){var o,e,i=this;t.target.checked?this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:s,productIndex:c,prop:"checked",val:!0}):this.$store.commit("CHANGE_CART_PRODUCT_DATA",{shopIndex:s,productIndex:c,prop:"checked",val:!1}),o=this.cartShops,e=i,o.forEach(function(t,s){t.products.every(function(t){return t.checked})?e.$store.commit("SHOP_ALL_CHECK",{shopIndex:s,val:!0}):e.$store.commit("SHOP_ALL_CHECK",{shopIndex:s,val:!1})})},delCartProduct:function(t,s){this.$store.commit("DEL_CART_PRODUCT",{shopIndex:t,productIndex:s}),0===this.cartShops[t].products.length&&this.$store.commit("DEL_CART_SHOP",t)},canGoPay:function(){0==this.allPrice?this.$refs.tip.toShowDialog(!0):this.$router.push("/pay")}},components:{CartCount:c("VU/8")(o,e,!1,function(t){c("7Sv/")},"data-v-2279bb80",null).exports,tipDialog:c("qmpc").a}},a={render:function(){var t=this,s=t.$createElement,c=t._self._c||s;return c("div",[c("div",{staticClass:"cart-list"},t._l(t.cartShops,function(s,o){return c("div",{key:s.shopID,staticClass:"list-shop"},[c("div",{staticClass:"shop-module"},[c("div",{staticClass:"checkbox"},[c("input",{staticClass:"input-choose",attrs:{id:s.shopID,type:"checkbox"},domProps:{checked:s.checked},on:{click:function(s){t.shopAllSelect(s,o)}}}),t._v(" "),c("label",{staticClass:"choose-label",attrs:{for:s.shopID}})]),t._v(" "),c("router-link",{staticClass:"shop-name",attrs:{to:"/shop/"+o+"?headName="+s.name}},[c("i",{staticClass:"iconfont"},[t._v("")]),t._v(t._s(s.name))]),t._v(" "),c("span",{staticClass:"icon--go"},[t._v(">")])],1),t._v(" "),c("ul",t._l(s.products,function(e,i){return c("li",{key:e.productID,staticClass:"list-product"},[c("div",{staticClass:"checkbox"},[c("input",{staticClass:"input-choose",attrs:{id:e.productID+e.type,"data-shop-id":s.shopID,"data-price":e.price,"data-count":e.count,type:"checkbox"},domProps:{checked:e.checked},on:{click:function(s){t.checkedSync(s,o,i)}}}),t._v(" "),c("label",{staticClass:"choose-label",attrs:{for:e.productID+e.type}})]),t._v(" "),c("div",{staticClass:"pic-wrap"},[c("img",{staticClass:"preview-pic",attrs:{src:e.picSrc}})]),t._v(" "),c("div",{staticClass:"product-module"},[c("p",{staticClass:"product-name btn--a"},[t._v(t._s(e.name))]),t._v(" "),c("div",{staticClass:"choose-type btn--a"},[c("span",[t._v(t._s(e.type))]),c("span",{staticClass:"icon--go"},[t._v(">")])]),t._v(" "),c("div",{staticClass:"btn-wrap"},[c("CartCount",{attrs:{"shop-index":o,"product-index":i}}),t._v(" "),c("button",{staticClass:"btn-del",on:{click:function(s){t.delCartProduct(o,i)}}},[t._v("删除")])],1)])])}))])})),t._v(" "),t.hasProducts?c("div",{staticClass:"payment-module"},[c("div",{staticClass:"all-price"},[t._v("总计："+t._s(t.allPrice))]),t._v(" "),c("a",{staticClass:"payment btn--a",on:{click:t.canGoPay}},[t._v("结算")]),t._v(" "),c("tip-dialog",{ref:"tip"},[t._v("请选择需要结算的商品")])],1):c("div",{staticClass:"no-product-tip"},[c("p",{staticClass:"tip-text"},[t._v("你的购物车空空如也")])])])},staticRenderFns:[]};var n=c("VU/8")(i,a,!1,function(t){c("edti")},"data-v-a05a8716",null);s.default=n.exports},"7Sv/":function(t,s){},HRxl:function(t,s){},edti:function(t,s){},qmpc:function(t,s,c){"use strict";var o={render:function(){var t=this,s=t.$createElement,c=t._self._c||s;return c("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDialog,expression:"isShowDialog"}],staticClass:"shadow"},[c("div",{staticClass:"dialog"},[c("div",{staticClass:"dialog-text"},[c("span",[t._t("default")],2)]),t._v(" "),c("div",{staticClass:"dialog-determine",on:{click:function(s){t.toShowDialog(!1)}}},[t._v("确定")])])])},staticRenderFns:[]};var e=c("VU/8")({data:function(){return{isShowDialog:!1}},methods:{toShowDialog:function(t){this.isShowDialog=t}}},o,!1,function(t){c("HRxl")},"data-v-73626a8b",null);s.a=e.exports}});
//# sourceMappingURL=3.a04b93c3c2fef0b976e7.js.map