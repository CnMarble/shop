webpackJsonp([4],{IWHs:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r=n("//Fk"),o=n.n(r),i=n("Xxa5"),s=n.n(i),c=n("exGp"),u=n.n(c),d={name:"App",data:function(){return{message:"",picSrc:"",isDown:!1,startX:void 0,startY:void 0,img:{},ctx:{}}},props:["id"],methods:{handleDrop:function(t){var e=this,n=this,a=t.dataTransfer;a.dropEffect="copy";var r=a.files,o=new FileReader;u()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=3;break}return t.next=3,o.readAsDataURL(r[0]);case 3:n.picSrc=o.result;case 4:case"end":return t.stop()}},t,e)}))},dragStart:function(t){event.target.value=event.target.value},handleDrop2:function(t){event.preventDefault(),event.target.value=event.dataTransfer.getData("text/plain")},handleClick:function(){var t=this;a.a.axios.get("../static/mod.js").then(function(e){t.message=e}).catch(function(e){t.message=e})},handleMouseDown:function(t){this.isDown=!0,this.startX=t.offsetX,this.startY=t.offsetY},handleMouseMove:function(t,e){var n=this;if(!0===this.isDown){t.target;var a=document.getElementById("result-canvas"),r=a.getContext("2d"),o=t.offsetX-this.startX,i=t.offsetY-this.startY;o=0==o?1:o,i=0==i?1:i,this.ctx.clearRect(0,0,e.width,e.height),this.ctx.drawImage(e,0,0),this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.fillRect(0,0,e.width,e.height),this.ctx.drawImage(e,this.startX,this.startY,o,i,this.startX,this.startY,o,i);var s=this.ctx.getImageData(this.startX,this.startY,o,i);a.width=o,a.height=i,r.clearRect(0,0,a.width,a.height),r.putImageData(s,0,0),a.toBlob(function(t){n.picSrc=URL.createObjectURL(t),document.getElementById("shit").onload=function(){URL.revokeObjectURL(n.picSrc)}})}},handleMouseUp:function(){this.isDown=!1},readFile:function(t){return new o.a(function(e,n){try{var a=new FileReader;a.readAsDataURL(t),a.addEventListener("load",function(){e(a.result)})}catch(t){n(t)}})},drawCanvas:function(t){var e=document.getElementById("canvas");this.ctx=e.getContext("2d");try{e.width=t.width,e.height=t.height,this.ctx.drawImage(t,0,0)}catch(t){throw new Error(t)}},handleUp:function(t){var e=this,n=new FormData,r=t.target.files[0];n.append("image",r),a.a.axios({method:"post",url:"./serve.js",data:n}).then(function(t){return console.log(t)}),u()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.img=new Image,t.next=3,e.readFile(r);case 3:return e.img.src=t.sent,t.t0=e,t.next=7,e.img;case 7:t.t1=t.sent,t.t0.drawCanvas.call(t.t0,t.t1);case 9:case"end":return t.stop()}},t,this)}))()}},watch:{$route:function(t,e){console.log(this)}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:t.handleClick}},[t._v("点击")]),t._v(" "),n("div",[t._v(t._s(t.message))]),t._v(" "),n("div",[t._v(t._s(t.id))]),t._v(" "),n("router-link",{attrs:{to:"/foo/1",exact:""}},[t._v("/foo1")]),t._v(" "),n("router-link",{attrs:{to:"/foo/2",exact:""}},[t._v("/foo2")]),t._v(" "),n("a",{attrs:{href:"#"},on:{click:function(e){t.$router.push("/bar?sb=1")}}},[t._v("/bar")]),t._v(" "),n("div",{staticClass:"upload-file-wrap"},[n("input",{staticClass:"upload-file",attrs:{type:"file",draggable:""},on:{change:function(e){t.handleUp(e)},dragstart:function(e){t.dragStart(e)},drop:function(e){t.handleDrop(e)}}})]),t._v(" "),n("input",{attrs:{type:"textarea"},on:{dragstart:t.dragStart,drop:function(e){t.handleDrop2(e)}}}),t._v(" "),n("input",{attrs:{type:"textarea"},on:{dragstart:t.dragStart,drop:function(e){t.handleDrop2(e)}}}),t._v(" "),n("canvas",{attrs:{id:"canvas"},on:{mousedown:function(e){t.handleMouseDown(e)},mousemove:function(e){t.handleMouseMove(e,t.img)},mouseup:t.handleMouseUp}}),t._v(" "),n("canvas",{attrs:{id:"result-canvas"}}),t._v(" "),n("img",{attrs:{id:"shit",src:t.picSrc}}),t._v(" "),n("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")(d,h,!1,function(t){n("IWHs")},null,null).exports,f=n("mtWM"),p=n.n(f),v=n("Rf8U"),g=n.n(v),m=n("/ocq");a.a.use(m.a);var w=new m.a({mode:"history",base:"/",routes:[{path:"/",props:!0},{path:"/foo/:idd",component:function(){return n.e(1).then(n.bind(null,"T0ku"))},meta:{fuck:"yes"},props:!0,children:[{path:"/ka",component:function(){return n.e(2).then(n.bind(null,"7wbr"))}}]},{path:"/bar",component:function(){return n.e(0).then(n.bind(null,"4qJz"))},alias:"/shit"}]}),x=n("NYxO");a.a.use(x.a);var _=new x.a.Store({strict:!1,state:{count:1,count3:0,count4:0,type:void 0,shit:void 0},mutations:{add:function(t,e){t.count+=e},jian:function(t,e){t.count4+=e.count},eatShit:function(t,e){t.shit=e}},actions:{typ:function(t,e){var n=t.commit;new o.a(function(t,e){setTimeout(function(){return t()},1e3)}).then(function(){return n("add",e)})}}});a.a.config.productionTip=!1,a.a.use(g.a,p.a),new a.a({el:"#app",components:{App:l},router:w,store:_,template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.86bcc0edf13a998dcd17.js.map