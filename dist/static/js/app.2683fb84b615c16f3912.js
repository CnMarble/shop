webpackJsonp([12],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view",{attrs:{name:"header"}}),this._v(" "),e("router-view"),this._v(" "),e("router-view",{attrs:{name:"footer"}})],1)},staticRenderFns:[]};var c,s,u,a=n("VU/8")({name:"App"},r,!1,function(t){n("SfVR")},null,null).exports,i=n("mtWM"),p=n.n(i).a.create({baseURL:"https://www.easy-mock.com/mock/5ba0b39d3b920159b7a83c2d/api"}),h=n("Rf8U"),d=n.n(h),f=n("/ocq"),l=n("Dd8w"),m=n.n(l),_=n("NYxO"),O=(n("424j"),n("bOdI")),T=n.n(O),C=n("mvHQ"),A=n.n(C),L={state:{shops:[],chooseType:{},chooseTypeIndex:0,chooseShop:{},chooseProduct:{},productCache:{},isEjectChooseType:!1},getters:{products:function(t){return t.chooseType.products}},mutations:(c={},T()(c,"LOAD_SHOP_LIST",function(t,e){t.shops=e.list}),T()(c,"LOAD_SHOP_TYPE",function(t,e){t.chooseShop=t.shops[e]}),T()(c,"LOAD_PRODUCT_TYPE",function(t,e){t.chooseType=t.chooseShop.types[e],t.chooseTypeIndex=e}),T()(c,"LOAD_PRODUCT_DETAIL",function(t,e){t.chooseProduct=this.getters.products[e],this.commit("PRODUCT_CACHE")}),T()(c,"SHOW_CHOOSE_TYPE",function(t,e){t.isEjectChooseType=e}),T()(c,"PRODUCT_CACHE",function(t){t.productCache=JSON.parse(A()(t.chooseProduct)),o.a.set(t.productCache,"count",1)}),T()(c,"CHANGE_PRODUCT_COUNT",function(t,e){o.a.set(t.productCache,"count",e)}),T()(c,"CART_PRODUCT_ALLPRICE",function(t,e){o.a.set(t.productCache,"allPrice",Math.ceil(100*e)/100)}),T()(c,"CHANGE_PRODUCT_CACHE",function(t,e){var n=e.key,r=e.value;o.a.set(t.productCache,n,r)}),c),actions:T()({},"LOAD_SHOP_LIST",function(t){var e=t.commit;if(0===t.state.shops.length)return o.a.axios({url:"/shopList",method:"get"}).then(function(t){return e("LOAD_SHOP_LIST",t.data)}).catch(function(t){return console.error(t)})})},D={state:{cartShops:[]},mutations:(s={},T()(s,"ADD_TO_CART",function(t,e){var n=t.cartShops;return n.every(function(t){return t.shopID!==e.shopID})?n.push(e):n=n.map(function(t){return t.products.every(function(t){return t.productID!==e.products[0].productID||t.type!==e.products[0].type})?t.products.push(e.products[0]):t.products.forEach(function(n,o){n.productID===e.products[0].productID&&n.type===e.products[0].type&&(t.products[o].count+=e.products[0].count)}),t}),n}),T()(s,"CHANGE_CART_PRODUCT_DATA",function(t,e){var n=e.shopIndex,r=e.productIndex,c=e.prop,s=e.val;o.a.set(t.cartShops[n].products[r],c,s)}),T()(s,"SHOP_ALL_CHECK",function(t,e){var n=e.shopIndex,r=e.val;o.a.set(this.state.cartShops[n],"checked",r)}),T()(s,"DEL_CART_SHOP",function(t,e){this.state.cartShops.splice(e,1)}),T()(s,"DEL_CART_PRODUCT",function(t,e){var n=e.shopIndex,o=e.productIndex;this.state.cartShops[n].products.splice(o,1)}),T()(s,"CLEAR_CART",function(t){this.state.cartShops=null}),s)},E={state:{hasLogin:!1,name:""},mutations:(u={},T()(u,"CHANGE_LOGIN_TOKEN",function(t){t.hasLogin=!0}),T()(u,"LOAD_USERNAME",function(t,e){t.name=e}),T()(u,"LOGOUT",function(t){t.name="",t.hasLogin=!1}),u)};o.a.use(_.a);var S=new _.a.Store({strict:!1,state:m()({},L.state,D.state,E.state),getters:m()({},L.getters),mutations:m()({},L.mutations,D.mutations,E.mutations),actions:m()({},L.actions)}),v=function(){return n.e(8).then(n.bind(null,"UzLt"))},P=function(){return n.e(7).then(n.bind(null,"NH3f"))};o.a.use(f.a);var I=new f.a({base:"/",routes:[{path:"/",name:"电商",alias:"/index",components:{default:function(){return n.e(1).then(n.bind(null,"8hXn"))},header:v,footer:P}},{path:"/shop/:shopIndex",name:"商店",props:{default:!0,header:!1,footer:!1},components:{default:function(){return n.e(2).then(n.bind(null,"9sln"))},header:v,footer:P},beforeEnter:function(t,e,n){S.commit("LOAD_SHOP_TYPE",t.params.shopIndex),n()}},{path:"/user",name:"用户管理",components:{default:function(){return n.e(6).then(n.bind(null,"nXOw"))},header:v,footer:P}},{path:"/order",name:"订单管理",components:{default:function(){return n.e(5).then(n.bind(null,"vF69"))},header:v,footer:P}},{name:"商品",path:"/shop/:shopIndex/product/:productIndex",components:{default:function(){return n.e(3).then(n.bind(null,"pGxt"))},header:v},beforeEnter:function(t,e,n){S.commit("LOAD_SHOP_TYPE",t.params.shopIndex),S.commit("LOAD_PRODUCT_DETAIL",t.params.productIndex),n()}},{path:"/cart",name:"购物车",components:{default:function(){return n.e(4).then(n.bind(null,"5bqY"))},header:v}},{path:"/login",name:"登陆",components:{default:function(){return n.e(0).then(n.bind(null,"Quw4"))},header:v}},{path:"/register",name:"注册",components:{default:function(){return n.e(9).then(n.bind(null,"c2lw"))},header:v}},{path:"/pay",name:"付款",components:{default:function(){return n.e(10).then(n.bind(null,"1xec"))},header:v}}]});I.beforeEach(function(t,e,n){"/login"===t.path?n():S.state.hasLogin||"/user"!=t.path?n():(console.log(e.path),n("/login"))});var b=I;o.a.config.productionTip=!1,o.a.use(d.a,p),new o.a({el:"#app",components:{App:a},router:b,store:S,template:"<App/>",methods:{setHTMLFontSize:function(){var t=document.documentElement.clientWidth||document.body.clientWidth;return document.documentElement.style.fontSize=t/3.75+"px",t}},created:function(){var t=this;t.setHTMLFontSize(),window.addEventListener("resize",function(){t.setHTMLFontSize()})}})},SfVR:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2683fb84b615c16f3912.js.map