{"version":3,"sources":["webpack:///src/components/cart/cart-count.vue","webpack:///./src/components/cart/cart-count.vue?622c","webpack:///./src/components/cart/cart-count.vue","webpack:///src/views/cart.vue","webpack:///./src/views/cart.vue?9632","webpack:///./src/views/cart.vue","webpack:///src/components/tip-dialog.vue","webpack:///./src/components/tip-dialog.vue?28f8","webpack:///./src/components/tip-dialog.vue"],"names":["cart_count","props","computed","product","get","this","$store","state","cartShops","shopIndex","products","productIndex","set","_ref","prop","val","commit","count","parseInt","computeAllPrice","methods","countSub","countplus","allPriceCache","Math","ceil","price","cart_cart_count","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","directives","name","rawName","value","expression","attrs","type","domProps","input","target","composing","staticRenderFns","cart","allPrice","length","map","shop","si","pi","checked","parseFloat","reduce","acc","cval","hasProducts","shopAllSelect","e","forEach","checkedSync","_this","every","delCartProduct","canGoPay","$refs","tip","toShowDialog","$router","push","components","CartCount","__webpack_require__","normalizeComponent","ssrContext","tipDialog","views_cart","_l","key","shopID","id","for","to","_s","productID","data-shop-id","data-price","data-count","src","picSrc","shop-index","product-index","ref","cart_Component","cart_normalizeComponent","__webpack_exports__","components_tip_dialog","_t","Component","data","isShowDialog","boolean"],"mappings":"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","file":"static/js/3.a04b93c3c2fef0b976e7.js","sourcesContent":["<template>\r\n  <div class=\"change-price\">\r\n    <span class=\"count\">\r\n      <button @click=\"countSub()\" class=\"icon-subtract\">-</button>\r\n        <input type=\"number\" v-model=\"count\" class=\"input-count\">\r\n      <button @click=\"countplus()\" class=\"icon-add\">+</button>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    props:['productIndex', 'shopIndex'],\r\n    computed:{\r\n      product:{\r\n        get(){\r\n          return this.$store.state.cartShops[this.shopIndex].products[this.productIndex];\r\n        },\r\n        set({prop,val}){\r\n          this.$store.commit('CHANGE_CART_PRODUCT_DATA',{\r\n            shopIndex: this.shopIndex,\r\n            productIndex: this.productIndex,\r\n            prop: prop,\r\n            val: val\r\n          });\r\n        }\r\n      },\r\n      count:{\r\n        get(){\r\n          return this.product.count;\r\n        },\r\n        set(val){\r\n          if(val){\r\n            this.product = {prop: 'count', val: parseInt(val)};\r\n            this.computeAllPrice();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods:{\r\n      countSub(){\r\n        this.count = this.product.count > 1 ? ( this.product.count - 1 ) : 1;\r\n      },\r\n      countplus(){\r\n        this.count =  this.product.count + 1;\r\n      },\r\n      computeAllPrice(){\r\n        let allPriceCache = Math.ceil(this.product.price * this.product.count * 100) / 100;\r\n        this.product = {prop: 'allPrice', val: allPriceCache};\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.change-price {\r\n  display: inline-flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.price {\r\n  margin: auto 0;\r\n  font-size: 20px;\r\n  display: inline-block;\r\n  color: red;\r\n}\r\n\r\n.price::after {\r\n  content:'元';\r\n}\r\n\r\n  .count {\r\n    display: flex;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .icon-subtract,.icon-add {\r\n    padding: .5em;\r\n    font-size: 20px;\r\n    line-height: 1;\r\n    background-color: #EEE;\r\n  }\r\n\r\n  .icon-subtract:hover,.icon-add:hover {\r\n    background-color: #DDD;\r\n  }\r\n\r\n  .input-count {\r\n    width: 2.5em;\r\n    margin: -9999px 0;\r\n    padding: 9999px 0;\r\n    font-size: 25px;\r\n    text-align: center;\r\n  }\r\n\r\n.input-count:focus {\r\n  outline-color: red;\r\n}\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/cart/cart-count.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"change-price\"},[_c('span',{staticClass:\"count\"},[_c('button',{staticClass:\"icon-subtract\",on:{\"click\":function($event){_vm.countSub()}}},[_vm._v(\"-\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.count),expression:\"count\"}],staticClass:\"input-count\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.count)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.count=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"icon-add\",on:{\"click\":function($event){_vm.countplus()}}},[_vm._v(\"+\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2279bb80\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/cart/cart-count.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2279bb80\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./cart-count.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart-count.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart-count.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2279bb80\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./cart-count.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2279bb80\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cart/cart-count.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <div class=\"cart-list\">\r\n      <div :key=\"shop.shopID\" v-for=\"(shop, shopIndex) in cartShops\" class=\"list-shop\">\r\n        <!-- 不同的店列表 -->\r\n        <div class=\"shop-module\">\r\n          <div class=\"checkbox\">\r\n            <input \r\n              :id=\"shop.shopID\" \r\n              :checked=\"shop.checked\" \r\n              @click=\"shopAllSelect($event,shopIndex)\" \r\n              type=\"checkbox\" \r\n              class=\"input-choose\">\r\n            <label :for=\"shop.shopID\" class=\"choose-label\"></label>\r\n          </div>\r\n          <router-link :to=\"'/shop/' + shopIndex + '?headName=' + shop.name\" class=\"shop-name\"><i class=\"iconfont\">&#xe601;</i>{{shop.name}}</router-link>\r\n          <span class=\"icon--go\">></span>\r\n        </div>\r\n\r\n        <!-- 同一家店的商品列表 -->\r\n        <ul>\r\n          <li v-for=\"(product, productIndex) in shop.products\" :key=\"product.productID\" class=\"list-product\">\r\n            <div class=\"checkbox\">\r\n\r\n              <input :checked=\"product.checked\" \r\n                :id=\"product.productID + product.type\" \r\n                :data-shop-id=\"shop.shopID\" \r\n                :data-price=\"product.price\" \r\n                :data-count=\"product.count\" \r\n                @click=\"checkedSync($event, shopIndex, productIndex)\" \r\n                type=\"checkbox\"\r\n                class=\"input-choose\">\r\n\r\n              <label :for=\"product.productID + product.type\" class=\"choose-label\"></label>\r\n            </div>\r\n\r\n              <div class=\"pic-wrap\">\r\n                <img :src=\"product.picSrc\" class=\"preview-pic\">\r\n              </div>\r\n\r\n              <div class=\"product-module\">\r\n                <p class=\"product-name btn--a\">{{product.name}}</p>\r\n                <div class=\"choose-type btn--a\">\r\n                  <span>{{product.type}}</span><span class=\"icon--go\">></span>\r\n                </div>\r\n                <div class=\"btn-wrap\">\r\n                  <CartCount :shop-index=\"shopIndex\" :product-index=\"productIndex\"></CartCount>\r\n                  <button @click=\"delCartProduct(shopIndex,productIndex)\" class=\"btn-del\">删除</button>\r\n                </div>\r\n              </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 结算底栏 -->\r\n    <div v-if=\"hasProducts\" class=\"payment-module\">\r\n      <div class=\"all-price\">总计：{{allPrice}}</div>\r\n      <a @click=\"canGoPay\" class=\"payment btn--a\">结算</a>\r\n      <tip-dialog ref=\"tip\">请选择需要结算的商品</tip-dialog>\r\n    </div>\r\n    <!-- 购物车无商品提示 -->\r\n    <div v-else class=\"no-product-tip\">\r\n      <p class=\"tip-text\">你的购物车空空如也</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport vue from \"vue\";\r\nimport CartCount from \"@/components/cart/cart-count\"\r\nimport tipDialog from '@/components/tip-dialog'\r\nexport default {\r\n  name: \"cart\",\r\n  computed: {\r\n    cartShops() {\r\n      return this.$store.state.cartShops;\r\n    },\r\n\r\n    /*计算总价格*/\r\n    allPrice() {\r\n      if (this.cartShops.length > 0) {\r\n        let allPriceCache = this.cartShops.map((shop, si) =>\r\n              shop.products.map((product, pi) => {\r\n                  if (product.checked) return parseFloat(product.allPrice);\r\n                  else return 0;\r\n              }).reduce((acc, cval) => acc + cval, 0) //各店的商品总价格\r\n        ).reduce((acc, cval) => acc + cval, 0); //所有店的商品总价格\r\n        return Math.ceil(100 * allPriceCache) / 100;\r\n      } else return 0;\r\n    },\r\n\r\n    /*购物车空则提示，否则显示付款底栏*/\r\n    hasProducts() {\r\n      if (this.cartShops.length == 0) return \"\";\r\n      else return \"/pay\";\r\n    },\r\n  },\r\n  methods: {\r\n    /*全选反选并同步store选中状态*/\r\n    shopAllSelect(e, shopIndex) {\r\n      const _self = this;\r\n\r\n      this.$store.commit(\"SHOP_ALL_CHECK\", {\r\n        shopIndex,\r\n        val: e.target.checked\r\n      });\r\n      if (!!e.target.checked)\r\n        this.cartShops[shopIndex].products.forEach((product, productIndex) => {\r\n          _self.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n            shopIndex,\r\n            productIndex,\r\n            prop: \"checked\",\r\n            val: true\r\n          });\r\n        });\r\n      else\r\n        this.cartShops[shopIndex].products.forEach((product, productIndex) => {\r\n          _self.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n            shopIndex,\r\n            productIndex,\r\n            prop: \"checked\",\r\n            val: false\r\n          });\r\n        });\r\n    },\r\n\r\n    /* 与store同步checked状态 */\r\n    checkedSync(e, shopIndex, productIndex) {\r\n      if (!!e.target.checked)\r\n        this.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n          shopIndex,\r\n          productIndex,\r\n          prop: \"checked\",\r\n          val: true\r\n        });\r\n      else\r\n        this.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n          shopIndex,\r\n          productIndex,\r\n          prop: \"checked\",\r\n          val: false\r\n        });\r\n\r\n      /* 如果所有商品都全选了，商店的全选按钮也变成选择状态 */\r\n      (cartShops => {\r\n        const _self = this;\r\n        cartShops.forEach((shop, shopIndex) => {\r\n          /* 如果全部商品都checked了, 则同步商品全选按钮checked */ \r\n          if (shop.products.every(product => product.checked))\r\n            _self.$store.commit(\"SHOP_ALL_CHECK\", { shopIndex, val: true });\r\n          else _self.$store.commit(\"SHOP_ALL_CHECK\", { shopIndex, val: false });\r\n        });\r\n      })(this.cartShops);\r\n    },\r\n\r\n    /*删除购物车某商品*/\r\n    delCartProduct(shopIndex, productIndex) {\r\n      this.$store.commit(\"DEL_CART_PRODUCT\", { shopIndex, productIndex });\r\n      /* 如果商店商品列表为空, 则删除该商店 */\r\n      if (this.cartShops[shopIndex].products.length === 0)\r\n        this.$store.commit(\"DEL_CART_SHOP\", shopIndex);\r\n    },\r\n    canGoPay(){\r\n      if(this.allPrice == 0) {\r\n        this.$refs.tip.toShowDialog(true);\r\n      } else this.$router.push('/pay');\r\n    }\r\n  },\r\n  components: {CartCount, tipDialog}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.cart-list {\r\n  margin-bottom: 0.4rem;\r\n}\r\n\r\n.list-shop {\r\n  margin: 0.1rem auto;\r\n  /*    padding: .1rem;*/\r\n  font-size: 16px;\r\n  background-color: white;\r\n}\r\n\r\n.shop-module {\r\n  padding: 0.1rem;\r\n  font-size: 20px;\r\n  display: flex;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.checkbox {\r\n  font-size: 20px;\r\n  margin: auto 0;\r\n}\r\n\r\n.input-choose {\r\n  display: none;\r\n}\r\n\r\n.choose-label {\r\n  height: 0.15rem;\r\n  width: 0.15rem;\r\n  display: inline-block;\r\n  background-color: #fff;\r\n  border: 1px solid gray;\r\n  border-radius: 50%;\r\n}\r\n\r\n.input-choose:checked + .choose-label {\r\n  background-color: #6288f7;\r\n}\r\n\r\n.shop-name {\r\n  margin-left: 0.5em;\r\n  display: inline-block;\r\n}\r\n\r\n.icon--go {\r\n  margin-left: 0.5em;\r\n}\r\n\r\n.list-product {\r\n  padding: 0.1rem;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.list-product + .list-product {\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.pic-wrap {\r\n  margin: auto;\r\n  margin-left: 0.5em;\r\n}\r\n\r\n.preview-pic {\r\n  height: 1rem;\r\n  width: 1rem;\r\n}\r\n\r\n.product-module {\r\n  margin: auto;\r\n  padding: 0 1em;\r\n  display: inline-block;\r\n  flex-grow: 1;\r\n}\r\n\r\n.choose-type {\r\n  margin: 1em auto;\r\n  background-color: #ddd;\r\n}\r\n\r\n.btn-wrap {\r\n  white-space: nowrap;\r\n}\r\n\r\n.btn-del {\r\n  margin-left: 1em;\r\n  padding: 0.5em;\r\n  font-size: 20px;\r\n  line-height: 1;\r\n  color: white;\r\n  background-color: red;\r\n}\r\n\r\n.payment-module {\r\n  height: 0.4rem;\r\n  position: fixed;\r\n  display: flex;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background-color: white;\r\n  text-align: center;\r\n}\r\n\r\n.all-price {\r\n  width: 60%;\r\n  margin: auto 0;\r\n  font-size: 20px;\r\n  line-height: 0.4rem;\r\n  flex-grow: 1;\r\n  display: inline-block;\r\n  color: red;\r\n}\r\n\r\n.all-price::after {\r\n  content: \"元\";\r\n}\r\n\r\n.payment {\r\n  margin: auto;\r\n  line-height: 0.4rem;\r\n  color: white;\r\n  background-color: red;\r\n  flex-grow: 1;\r\n}\r\n\r\n.no-product-tip {\r\n  height: 3rem;\r\n  margin: auto;\r\n  padding: ;\r\n  & .tip-text {\r\n    text-align: center;\r\n    font-size: 30px;\r\n    line-height: 3rem;\r\n    vertical-align: middle;\r\n    color: #aaa;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/cart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"cart-list\"},_vm._l((_vm.cartShops),function(shop,shopIndex){return _c('div',{key:shop.shopID,staticClass:\"list-shop\"},[_c('div',{staticClass:\"shop-module\"},[_c('div',{staticClass:\"checkbox\"},[_c('input',{staticClass:\"input-choose\",attrs:{\"id\":shop.shopID,\"type\":\"checkbox\"},domProps:{\"checked\":shop.checked},on:{\"click\":function($event){_vm.shopAllSelect($event,shopIndex)}}}),_vm._v(\" \"),_c('label',{staticClass:\"choose-label\",attrs:{\"for\":shop.shopID}})]),_vm._v(\" \"),_c('router-link',{staticClass:\"shop-name\",attrs:{\"to\":'/shop/' + shopIndex + '?headName=' + shop.name}},[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_vm._v(_vm._s(shop.name))]),_vm._v(\" \"),_c('span',{staticClass:\"icon--go\"},[_vm._v(\">\")])],1),_vm._v(\" \"),_c('ul',_vm._l((shop.products),function(product,productIndex){return _c('li',{key:product.productID,staticClass:\"list-product\"},[_c('div',{staticClass:\"checkbox\"},[_c('input',{staticClass:\"input-choose\",attrs:{\"id\":product.productID + product.type,\"data-shop-id\":shop.shopID,\"data-price\":product.price,\"data-count\":product.count,\"type\":\"checkbox\"},domProps:{\"checked\":product.checked},on:{\"click\":function($event){_vm.checkedSync($event, shopIndex, productIndex)}}}),_vm._v(\" \"),_c('label',{staticClass:\"choose-label\",attrs:{\"for\":product.productID + product.type}})]),_vm._v(\" \"),_c('div',{staticClass:\"pic-wrap\"},[_c('img',{staticClass:\"preview-pic\",attrs:{\"src\":product.picSrc}})]),_vm._v(\" \"),_c('div',{staticClass:\"product-module\"},[_c('p',{staticClass:\"product-name btn--a\"},[_vm._v(_vm._s(product.name))]),_vm._v(\" \"),_c('div',{staticClass:\"choose-type btn--a\"},[_c('span',[_vm._v(_vm._s(product.type))]),_c('span',{staticClass:\"icon--go\"},[_vm._v(\">\")])]),_vm._v(\" \"),_c('div',{staticClass:\"btn-wrap\"},[_c('CartCount',{attrs:{\"shop-index\":shopIndex,\"product-index\":productIndex}}),_vm._v(\" \"),_c('button',{staticClass:\"btn-del\",on:{\"click\":function($event){_vm.delCartProduct(shopIndex,productIndex)}}},[_vm._v(\"删除\")])],1)])])}))])})),_vm._v(\" \"),(_vm.hasProducts)?_c('div',{staticClass:\"payment-module\"},[_c('div',{staticClass:\"all-price\"},[_vm._v(\"总计：\"+_vm._s(_vm.allPrice))]),_vm._v(\" \"),_c('a',{staticClass:\"payment btn--a\",on:{\"click\":_vm.canGoPay}},[_vm._v(\"结算\")]),_vm._v(\" \"),_c('tip-dialog',{ref:\"tip\"},[_vm._v(\"请选择需要结算的商品\")])],1):_c('div',{staticClass:\"no-product-tip\"},[_c('p',{staticClass:\"tip-text\"},[_vm._v(\"你的购物车空空如也\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a05a8716\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/cart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a05a8716\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./cart.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a05a8716\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./cart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a05a8716\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/cart.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div v-show=\"isShowDialog\" class=\"shadow\">\r\n    <div class=\"dialog\">\r\n      <div class=\"dialog-text\"><span><slot></slot></span></div>\r\n      <div @click=\"toShowDialog(false)\" class=\"dialog-determine\">确定</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        isShowDialog: false\r\n      }\r\n    },\r\n    methods: {\r\n      toShowDialog(boolean){\r\n        this.isShowDialog = boolean;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.shadow {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  text-align: center;\r\n  font-size: 0;\r\n  white-space: nowrap;\r\n  overflow: auto;\r\n}\r\n\r\n.shadow::after {\r\n  content: \"\";\r\n  display: inline-block;\r\n  height: 100%;\r\n  vertical-align: middle;\r\n}\r\n\r\n.dialog {\r\n  width: 50%;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  white-space: normal;\r\n  background-color: white;\r\n  border-radius: 0.05rem;\r\n  & .dialog-text {\r\n    line-height: 2;\r\n    & .dialog-text > span {\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n    }\r\n  }\r\n  & .dialog-determine {\r\n    padding: 0.5em 0;\r\n    font-size: 14px;\r\n    border-top: 1px solid;\r\n    color: blue;\r\n  }\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/tip-dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowDialog),expression:\"isShowDialog\"}],staticClass:\"shadow\"},[_c('div',{staticClass:\"dialog\"},[_c('div',{staticClass:\"dialog-text\"},[_c('span',[_vm._t(\"default\")],2)]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-determine\",on:{\"click\":function($event){_vm.toShowDialog(false)}}},[_vm._v(\"确定\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73626a8b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tip-dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-73626a8b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tip-dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tip-dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tip-dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73626a8b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tip-dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-73626a8b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tip-dialog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}