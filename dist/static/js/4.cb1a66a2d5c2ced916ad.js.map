{"version":3,"sources":["webpack:///src/components/cart/cart-count.vue","webpack:///./src/components/cart/cart-count.vue?115e","webpack:///./src/components/cart/cart-count.vue","webpack:///src/views/cart.vue","webpack:///./src/views/cart.vue?e0b2","webpack:///./src/views/cart.vue"],"names":["cart_count","props","computed","product","get","this","$store","state","cartShops","shopIndex","products","productIndex","set","_ref","prop","val","commit","count","parseInt","computeAllPrice","methods","countSub","countplus","allPriceCache","Math","ceil","price","cart_cart_count","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","directives","name","rawName","value","expression","attrs","type","domProps","input","target","composing","staticRenderFns","cart","allPrice","length","map","shop","si","pi","checked","parseFloat","reduce","acc","cval","canGoPay","watch","handler","forEach","console","log","every","deep","shopAllSelect","e","checkedSync","delCartProduct","created","components","CartCount","__webpack_require__","normalizeComponent","ssrContext","views_cart","_l","id","shopID","for","to","_s","key","productID","data-shop-id","data-price","data-count","src","picSrc","shop-index","product-index","cart_Component","cart_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/4.cb1a66a2d5c2ced916ad.js","sourcesContent":["<template>\r\n  <div class=\"change-price\">\r\n    <span class=\"count\">\r\n      <button @click=\"countSub()\" class=\"icon-subtract\">-</button>\r\n        <input type=\"number\" v-model=\"count\" class=\"input-count\">\r\n      <button @click=\"countplus()\" class=\"icon-add\">+</button>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    props:['productIndex','shopIndex'],\r\n    computed:{\r\n      product:{\r\n        get(){\r\n          return this.$store.state.cartShops[this.shopIndex].products[this.productIndex];\r\n        },\r\n        set({prop,val}){\r\n          this.$store.commit('CHANGE_CART_PRODUCT_DATA',{\r\n            shopIndex: this.shopIndex,\r\n            productIndex: this.productIndex,\r\n            prop: prop,\r\n            val: val\r\n          });\r\n        }\r\n      },\r\n      count:{\r\n        get(){\r\n          return this.product.count;\r\n        },\r\n        set(val){\r\n          if(val){\r\n            this.product = { prop: 'count', val: parseInt(val) };\r\n            this.computeAllPrice();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods:{\r\n      countSub(){\r\n        this.count = this.product.count > 1 ? ( this.product.count - 1 ) : 1;\r\n      },\r\n      countplus(){\r\n        this.count =  this.product.count + 1;\r\n      },\r\n      computeAllPrice(){\r\n        let allPriceCache = Math.ceil(this.product.price * this.product.count * 100) / 100;\r\n        this.product = { prop:'allPrice', val: allPriceCache };\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.change-price {\r\n  display: inline-flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.price {\r\n  margin: auto 0;\r\n  font-size: 20px;\r\n  display: inline-block;\r\n  color: red;\r\n}\r\n\r\n.price::after {\r\n  content:'元';\r\n}\r\n\r\n  .count {\r\n    display: flex;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .icon-subtract,.icon-add {\r\n    padding: .5em;\r\n    font-size: 20px;\r\n    line-height: 1;\r\n    background-color: #EEE;\r\n  }\r\n\r\n  .icon-subtract:hover,.icon-add:hover {\r\n    background-color: #DDD;\r\n  }\r\n\r\n  .input-count {\r\n    width: 2.5em;\r\n    margin: -9999px 0;\r\n    padding: 9999px 0;\r\n    font-size: 25px;\r\n    text-align: center;\r\n  }\r\n\r\n.input-count:focus {\r\n  outline-color: red;\r\n}\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/cart/cart-count.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"change-price\"},[_c('span',{staticClass:\"count\"},[_c('button',{staticClass:\"icon-subtract\",on:{\"click\":function($event){_vm.countSub()}}},[_vm._v(\"-\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.count),expression:\"count\"}],staticClass:\"input-count\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.count)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.count=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"icon-add\",on:{\"click\":function($event){_vm.countplus()}}},[_vm._v(\"+\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b522f2f0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/cart/cart-count.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b522f2f0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./cart-count.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart-count.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart-count.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b522f2f0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./cart-count.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b522f2f0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cart/cart-count.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <div class=\"cart-list\">\r\n      <div v-for=\"(shop, shopIndex) in cartShops\" class=\"list-shop\">\r\n        <!-- 不同的店列表 -->\r\n        <div class=\"shop-module\">\r\n          <div class=\"checkbox\">\r\n            <input \r\n              :id=\"shop.shopID\" \r\n              :checked=\"shop.checked\" \r\n              @click=\"shopAllSelect($event,shopIndex)\" \r\n              type=\"checkbox\" \r\n              class=\"input-choose\">\r\n            <label :for=\"shop.shopID\" class=\"choose-label\"></label>\r\n          </div>\r\n          <router-link :to=\"'/shop/' + shopIndex + '?headName=' + shop.name\" class=\"shop-name\">{{shop.name}}</router-link>\r\n          <span class=\"icon--go\">></span>\r\n        </div>\r\n\r\n        <!-- 同一家店的商品列表 -->\r\n        <ul>\r\n          <li v-for=\"(product, productIndex) in shop.products\" :key=\"product.productID\" class=\"list-product\">\r\n            <div class=\"checkbox\">\r\n\r\n              <input :checked=\"product.checked\" \r\n                :id=\"product.productID + product.type\" \r\n                :data-shop-id=\"shop.shopID\" \r\n                :data-price=\"product.price\" \r\n                :data-count=\"product.count\" \r\n                @click=\"checkedSync($event, shopIndex, productIndex)\" \r\n                type=\"checkbox\"\r\n                class=\"input-choose\">\r\n\r\n              <label :for=\"product.productID + product.type\" class=\"choose-label\"></label>\r\n            </div>\r\n\r\n              <div class=\"pic-wrap\">\r\n                <img :src=\"product.picSrc\" class=\"preview-pic\">\r\n              </div>\r\n\r\n              <div class=\"product-module\">\r\n                <p class=\"product-name btn--a\">{{product.name}}</p>\r\n                <div class=\"choose-type btn--a\">\r\n                  <span>{{product.type}}</span><span class=\"icon--go\">></span>\r\n                </div>\r\n                <CartCount :shop-index=\"shopIndex\" :product-index=\"productIndex\"></CartCount>\r\n                <button @click=\"delCartProduct(shopIndex,productIndex)\" class=\"btn-del\">删除</button>\r\n              </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 结算底栏 -->\r\n    <div v-if=\"canGoPay\" class=\"payment-module\">\r\n      <div class=\"all-price\">总计：{{allPrice}}</div>\r\n      <router-link :to=\"canGoPay\" class=\"payment btn--a\">结算</router-link>\r\n    </div>\r\n\r\n    <!-- 购物车无商品提示 -->\r\n    <div v-else class=\"no-product-tip\">\r\n      <p class=\"tip-text\">你的购物车空空如也</p>\r\n    </div>\r\n  \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport vue from \"vue\";\r\nimport CartCount from \"@/components/cart/cart-count\";\r\nexport default {\r\n  name: \"cart\",\r\n  computed: {\r\n    cartShops() {\r\n      return this.$store.state.cartShops;\r\n    },\r\n    /*计算总价格*/\r\n    allPrice() {\r\n      if (this.cartShops.length > 0) {\r\n        let allPriceCache = this.cartShops\r\n          .map(\r\n            (shop, si) =>\r\n              shop.products\r\n                .map((product, pi) => {\r\n                  if (product.checked) return parseFloat(product.allPrice);\r\n                  else return 0;\r\n                })\r\n                .reduce((acc, cval) => acc + cval, 0) //各店的商品总价格\r\n          )\r\n          .reduce((acc, cval) => acc + cval, 0); //所有店的商品总价格\r\n        return Math.ceil(100 * allPriceCache) / 100;\r\n      } else return 0;\r\n    },\r\n    /*购物车空则提示，否则可以跳转付款*/\r\n    canGoPay() {\r\n      if (this.$store.state.cartShops.length == 0) return \"\";\r\n      else return \"/pay\";\r\n    }\r\n  },\r\n  watch: {\r\n    /* 如果所有商品都全选了，商店的全选按钮也变成选择状态 */\r\n    cartShops: {\r\n      handler(cartShops) {\r\n        const _self = this;\r\n        cartShops.forEach((shop, shopIndex) => {\r\n          console.log(shop.products.length);\r\n          /* 如果商店商品列表为, 则删除该商店 */\r\n          if (shop.products.length === 0)\r\n            _self.$store.commit(\"DEL_CART_SHOP\", shopIndex);\r\n          /* 如果全部商品都checked了, 则同步商品全选按钮checked */ else if (\r\n            shop.products.every(product => product.checked)\r\n          )\r\n            _self.$store.commit(\"SHOP_ALL_CHECK\", { shopIndex, val: true });\r\n          else _self.$store.commit(\"SHOP_ALL_CHECK\", { shopIndex, val: false });\r\n        });\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    /*全选反选并同步store选中状态*/\r\n    shopAllSelect(e, shopIndex) {\r\n      const _self = this;\r\n\r\n      this.$store.commit(\"SHOP_ALL_CHECK\", {\r\n        shopIndex,\r\n        val: e.target.checked\r\n      });\r\n      if (!!e.target.checked)\r\n        this.cartShops[shopIndex].products.forEach((product, productIndex) => {\r\n          _self.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n            shopIndex,\r\n            productIndex,\r\n            prop: \"checked\",\r\n            val: true\r\n          });\r\n        });\r\n      else\r\n        this.cartShops[shopIndex].products.forEach((product, productIndex) => {\r\n          _self.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n            shopIndex,\r\n            productIndex,\r\n            prop: \"checked\",\r\n            val: false\r\n          });\r\n        });\r\n    },\r\n    /*与store同步checked状态*/\r\n    checkedSync(e, shopIndex, productIndex) {\r\n      if (!!e.target.checked)\r\n        this.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n          shopIndex,\r\n          productIndex,\r\n          prop: \"checked\",\r\n          val: true\r\n        });\r\n      else\r\n        this.$store.commit(\"CHANGE_CART_PRODUCT_DATA\", {\r\n          shopIndex,\r\n          productIndex,\r\n          prop: \"checked\",\r\n          val: false\r\n        });\r\n    },\r\n    /*删除购物车某商品*/\r\n    delCartProduct(shopIndex, productIndex) {\r\n      this.$store.commit(\"DEL_CART_PRODUCT\", { shopIndex, productIndex });\r\n    }\r\n  },\r\n  created() {\r\n    // this.$store.commit('')\r\n  },\r\n  // mounted(){\r\n  //   _self = this;\r\n  //   console.log(this);\r\n  //   this.cartShops.forEach((shop, shopIndex) => {\r\n  //     _self.$watch(`cartShops[${shopIndex}].products`, (newval, oldval) => {\r\n  //       if(newval.length === 0) _self.$store.commit('DEL_CART_SHOP', shopIndex);\r\n  //     });\r\n  //   });\r\n  // },\r\n  components: { CartCount }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.cart-list {\r\n  margin-bottom: 0.4rem;\r\n}\r\n\r\n.list-shop {\r\n  margin: 0.1rem auto;\r\n  /*    padding: .1rem;*/\r\n  font-size: 16px;\r\n  background-color: white;\r\n}\r\n\r\n.shop-module {\r\n  padding: 0.1rem;\r\n  font-size: 20px;\r\n  display: flex;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.checkbox {\r\n  font-size: 20px;\r\n  margin: auto 0;\r\n}\r\n\r\n.input-choose {\r\n  display: none;\r\n}\r\n\r\n.choose-label {\r\n  height: 0.15rem;\r\n  width: 0.15rem;\r\n  display: inline-block;\r\n  background-color: #fff;\r\n  border: 1px solid gray;\r\n  border-radius: 50%;\r\n}\r\n\r\n.input-choose:checked + .choose-label {\r\n  background-color: #6288f7;\r\n}\r\n\r\n.shop-name {\r\n  margin-left: 0.5em;\r\n  display: inline-block;\r\n}\r\n\r\n.icon--go {\r\n  margin-left: 0.5em;\r\n}\r\n\r\n.list-product {\r\n  padding: 0.1rem;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.list-product + .list-product {\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.pic-wrap {\r\n  margin: auto;\r\n  margin-left: 0.5em;\r\n}\r\n\r\n.preview-pic {\r\n  height: 1rem;\r\n  width: 1rem;\r\n}\r\n\r\n.product-module {\r\n  margin: auto;\r\n  padding: 0 1em;\r\n  display: inline-block;\r\n  flex-grow: 1;\r\n}\r\n\r\n.choose-type {\r\n  margin: 1em auto;\r\n  background-color: #ddd;\r\n}\r\n\r\n.btn-del {\r\n  margin-left: 1em;\r\n  padding: 0.5em;\r\n  font-size: 20px;\r\n  line-height: 1;\r\n  color: white;\r\n  background-color: red;\r\n}\r\n\r\n.payment-module {\r\n  height: 0.4rem;\r\n  position: fixed;\r\n  display: flex;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background-color: white;\r\n  text-align: center;\r\n}\r\n\r\n.all-price {\r\n  width: 60%;\r\n  margin: auto 0;\r\n  font-size: 20px;\r\n  line-height: 0.4rem;\r\n  flex-grow: 1;\r\n  display: inline-block;\r\n  color: red;\r\n}\r\n\r\n.all-price::after {\r\n  content: \"元\";\r\n}\r\n\r\n.payment {\r\n  margin: auto;\r\n  line-height: 0.4rem;\r\n  color: white;\r\n  background-color: red;\r\n  flex-grow: 1;\r\n}\r\n\r\n.no-product-tip {\r\n  height: 3rem;\r\n  margin: auto;\r\n  padding: ;\r\n  & .tip-text {\r\n    text-align: center;\r\n    font-size: 30px;\r\n    line-height: 3rem;\r\n    vertical-align: middle;\r\n    color: #aaa;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/cart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"cart-list\"},_vm._l((_vm.cartShops),function(shop,shopIndex){return _c('div',{staticClass:\"list-shop\"},[_c('div',{staticClass:\"shop-module\"},[_c('div',{staticClass:\"checkbox\"},[_c('input',{staticClass:\"input-choose\",attrs:{\"id\":shop.shopID,\"type\":\"checkbox\"},domProps:{\"checked\":shop.checked},on:{\"click\":function($event){_vm.shopAllSelect($event,shopIndex)}}}),_vm._v(\" \"),_c('label',{staticClass:\"choose-label\",attrs:{\"for\":shop.shopID}})]),_vm._v(\" \"),_c('router-link',{staticClass:\"shop-name\",attrs:{\"to\":'/shop/' + shopIndex + '?headName=' + shop.name}},[_vm._v(_vm._s(shop.name))]),_vm._v(\" \"),_c('span',{staticClass:\"icon--go\"},[_vm._v(\">\")])],1),_vm._v(\" \"),_c('ul',_vm._l((shop.products),function(product,productIndex){return _c('li',{key:product.productID,staticClass:\"list-product\"},[_c('div',{staticClass:\"checkbox\"},[_c('input',{staticClass:\"input-choose\",attrs:{\"id\":product.productID + product.type,\"data-shop-id\":shop.shopID,\"data-price\":product.price,\"data-count\":product.count,\"type\":\"checkbox\"},domProps:{\"checked\":product.checked},on:{\"click\":function($event){_vm.checkedSync($event, shopIndex, productIndex)}}}),_vm._v(\" \"),_c('label',{staticClass:\"choose-label\",attrs:{\"for\":product.productID + product.type}})]),_vm._v(\" \"),_c('div',{staticClass:\"pic-wrap\"},[_c('img',{staticClass:\"preview-pic\",attrs:{\"src\":product.picSrc}})]),_vm._v(\" \"),_c('div',{staticClass:\"product-module\"},[_c('p',{staticClass:\"product-name btn--a\"},[_vm._v(_vm._s(product.name))]),_vm._v(\" \"),_c('div',{staticClass:\"choose-type btn--a\"},[_c('span',[_vm._v(_vm._s(product.type))]),_c('span',{staticClass:\"icon--go\"},[_vm._v(\">\")])]),_vm._v(\" \"),_c('CartCount',{attrs:{\"shop-index\":shopIndex,\"product-index\":productIndex}}),_vm._v(\" \"),_c('button',{staticClass:\"btn-del\",on:{\"click\":function($event){_vm.delCartProduct(shopIndex,productIndex)}}},[_vm._v(\"删除\")])],1)])}))])})),_vm._v(\" \"),(_vm.canGoPay)?_c('div',{staticClass:\"payment-module\"},[_c('div',{staticClass:\"all-price\"},[_vm._v(\"总计：\"+_vm._s(_vm.allPrice))]),_vm._v(\" \"),_c('router-link',{staticClass:\"payment btn--a\",attrs:{\"to\":_vm.canGoPay}},[_vm._v(\"结算\")])],1):_c('div',{staticClass:\"no-product-tip\"},[_c('p',{staticClass:\"tip-text\"},[_vm._v(\"你的购物车空空如也\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4f167da3\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/cart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4f167da3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./cart.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./cart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f167da3\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./cart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4f167da3\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/cart.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}